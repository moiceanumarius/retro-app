<!-- Action Description -->
<div class="action-detail-group">
    <label class="action-detail-label">Description</label>
    <div class="action-description-detail">
        <div class="action-description-view" id="modal-view-{{ action.id }}" onclick="editModalActionDescription({{ action.id }})">
            {{ action.description }}
        </div>
        <div class="action-description-edit" id="modal-edit-{{ action.id }}" style="display: none;">
            <textarea class="action-edit-textarea" rows="4" id="modal-text-{{ action.id }}">{{ action.description }}</textarea>
            <div class="action-edit-actions">
                <button class="btn btn-sm btn-success save-action-btn" onclick="saveModalActionDescription({{ action.id }})">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Save Changes
                </button>
                <button class="btn btn-sm btn-secondary cancel-action-btn" onclick="cancelModalActionDescription({{ action.id }})">
                    <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Assignee Information -->
<div class="action-detail-group">
    <label class="action-detail-label">Assigned To</label>
    {% if action.assignedTo %}
        <div class="action-assignee-detail">
            <div class="action-assignee-avatar">
                {{ action.assignedTo.email|slice(0,1)|upper }}
            </div>
            <div class="action-assignee-info">
                <div class="action-assignee-name">{{ action.assignedTo.email }}</div>
                <div class="action-assignee-role">
                    {% if action.retrospective.team.owner == action.assignedTo %}
                        Team Owner
                    {% else %}
                        Team Member
                    {% endif %}
                </div>
            </div>
        </div>
    {% else %}
        <div style="color: #9ca3af; font-style: italic; padding: 1rem; background: #f9fafb; border-radius: 8px;">
            No one assigned to this action
        </div>
    {% endif %}
</div>

<!-- Action Metadata -->
<div class="action-metadata">
    <div class="action-metadata-item">
        <div class="label">Status</div>
        <div class="value">
            <span class="status-badge {{ action.status }}">
                {{ action.status|replace({'-': ' '})|title }}
            </span>
        </div>
    </div>

    <div class="action-metadata-item">
        <div class="label">Due Date</div>
        <div class="value">
            {% if action.dueDate %}
                {{ action.dueDate|date('l, F j, Y') }}
            {% else %}
                <span style="color: #9ca3af;">No due date set</span>
            {% endif %}
        </div>
    </div>

    <div class="action-metadata-item">
        <div class="label">Created By</div>
        <div class="value">{{ action.createdBy.email }}</div>
    </div>

    <div class="action-metadata-item">
        <div class="label">Created At</div>
        <div class="value">{{ action.createdAt|date('M d, Y H:i') }}</div>
    </div>

    {% if action.completedAt %}
    <div class="action-metadata-item">
        <div class="label">Completed At</div>
        <div class="value">{{ action.completedAt|date('M d, Y H:i') }}</div>
    </div>
    {% endif %}
</div>

<style>
.status-badge {
    padding: 0.375rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: inline-block;
}

.status-badge.pending {
    background: #64748b;
    color: white;
}

.status-badge.open {
    background: #ff6b6b;
    color: white;
}

.status-badge.in-progress {
    background: #ffd93d;
    color: #744210;
}

.status-badge.completed {
    background: #6bcf7f;
    color: white;
}

.status-badge.cancelled {
    background: #94a3b8;
    color: white;
}
</style>